<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Handling async in C++/CX &#8211; ygc development blog</title>
<meta name="description" content="
  
    Overview
  


  


">
<meta name="keywords" content="ygc, development, c++/cx">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="Handling async in C++/CX">
<meta name="twitter:description" content="
  
    Overview
  


  


">
<meta name="twitter:site" content="@yakcyll">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://yakcyll.github.io/ygc-dev/images/header.png">

<!-- Open Graph -->
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Handling async in C++/CX">
<meta property="og:description" content="
  
    Overview
  


  


">
<meta property="og:url" content="https://yakcyll.github.io/ygc-dev/handling-async-in-ccx.html">
<meta property="og:site_name" content="ygc development blog">





<link rel="canonical" href="https://yakcyll.github.io/ygc-dev/handling-async-in-ccx.html">
<link href="https://yakcyll.github.io/ygc-dev/feed.xml" type="application/atom+xml" rel="alternate" title="ygc development blog Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://yakcyll.github.io/ygc-dev/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="https://yakcyll.github.io/ygc-dev/assets/js/vendor/html5shiv.min.js"></script>
	<script src="https://yakcyll.github.io/ygc-dev/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="https://yakcyll.github.io/ygc-dev/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://yakcyll.github.io/ygc-dev/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://yakcyll.github.io/ygc-dev/favicon.png">

<!-- use https god damn it! -->
<script type="text/javascript">
  if (window.location.protocol != "https:" && window.location.href.indexOf("http://localhost") !== 0)
    window.location.href = "https:" + window.location.href.substring(window.location.protocol.length);
</script>

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="https://yakcyll.github.io/ygc-dev">ygc development blog</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
					    
					        
					    
					    <li><a href="https://yakcyll.github.io/ygc-dev/" >Main Page</a></li>
					  
					    
					        
					    
					    <li><a href="https://yakcyll.github.io/ygc-dev/posts/" >Posts</a></li>
					  
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


  <div class="image-wrap">
  <img src=
    
      "https://yakcyll.github.io/ygc-dev/images/header.png"
    
  alt="Handling async in C++/CX feature image">
  
  </div><!-- /.image-wrap -->


<div id="main" role="main">
  <div class="article-author-side">
    

<!--
	<img src="https://yakcyll.github.io/ygc-dev/images/" class="bio-photo" alt="yakcyll~ bio photo">
    -->
<h3>yakcyll~</h3>
<p></p>
<a href="mailto:yakcyll@gmail.com" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/yakcyll" class="author-social" target="_blank"><i class="fa fa-twitter-square"></i> Twitter</a>





<a href="http://github.com/yakcyll" class="author-social" target="_blank"><i class="fa fa-github"></i> Github</a>







  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="https://yakcyll.github.io/ygc-dev/handling-async-in-ccx.html" rel="bookmark" title="Handling async in C++/CX">Handling async in C++/CX</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <section id="table-of-contents" class="toc">
  <header>
    <h3>Overview</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#how-to-handle-asynchronous-turn-based-input-in-ccx">How to handle asynchronous, turn-based input in C++/CX?</a></li>
</ul>

  </div>
</section>

<p>I didn’t plan to write much this time, but with this little bit of downtime, I figured I’d get this load of horseshit off my back.</p>

<p class="parind">It turns out that, yes, C++/CX is exactly what I was looking for. It’s an extension of C++ that supplies all the thigamajigs that .NET requires to run smoothly, including reference counting, metadata generation and others. With a few syntax changes and various new restrictions regarding, for example, code visibility, you’ll be free to use your legacy code and your legacy habits to write Windows Runtime based apps. I mean, sign me in!</p>

<p>All this is subject to common limitations though. While your backend code is running natively and you can code your UI logic in C++, the UI architecture remains unchanged and you still have to work around its asynchronous nature - that means handling all the various events, applications becoming frozen and whatnots. One major hurdle with that that I’ve just encountered is related to a design decision that will shape up the entire engine for the rest of the process. </p>

<h2 id="how-to-handle-asynchronous-turn-based-input-in-ccx">How to handle asynchronous, turn-based input in C++/CX?</h2>

<p>Imagine you have a black box storing some sort of data defined as its state. Said box can gather information from various, but well-defined external sources and modify its state based on that information. Your job is to design the way this black box will handle the process. </p>

<p>From my understanding, there are basically two approaches one can decide on in this particular case. The first one is to define events that would spawn upon receiving data from a given source, handlers of which would deal with information parsing and state modification. The other is to make use of a program loop that would listen for data on every source in turn and, upon acquiring them, deal with them appropriately.</p>

<p>In regular C++ there is no such construct as events, so the usual approach to the issue of processing async data, for example in regards to networking, would be the latter one. For example, you pop a select()/read() on a socket, parse the buffer, do some work and do the same for another socket. That, sadly, won’t work in Windows Phone 8.1 (or, as I suspect, whenever an UI, that is tightly-coupled to the app’s backend, is concerned), because whenever your logic hangs, your UI pretty much does too. The way to handle asynchronous data processing in C++/CX seems to be to make use of tasks - chains of well-defined operations that await results of each part of the chain and then pass it to the next, up until the processing is done. That doesn’t solve the issue at hand though, as in this case, the definition of the operation isn’t the culprit - it’s registering that an event occured and then acting accordingly.</p>

<p>What you can do in this case is to either abuse semaphores - create tasks with functions that hang on a semaphore, which would be signalled by an event when a specific piece of input arrives - or abandon this approach altogether and pick up the other one, securing the state from being modified by other means. I’ve opened a StackOverflow question on this issue - maybe by the time you read it, somebody will provide useful feedback on it: https://stackoverflow.com/questions/26456863/is-there-a-substitution-for-cs-await-in-c-cx</p>


      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          

<!--
	<img src="https://yakcyll.github.io/ygc-dev/images/" class="bio-photo" alt="yakcyll~ bio photo">
    -->
<h3>yakcyll~</h3>
<p></p>
<a href="mailto:yakcyll@gmail.com" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/yakcyll" class="author-social" target="_blank"><i class="fa fa-twitter-square"></i> Twitter</a>





<a href="http://github.com/yakcyll" class="author-social" target="_blank"><i class="fa fa-github"></i> Github</a>







        </div>
        <p class="byline"><strong>Handling async in C++/CX</strong> was published on <time datetime="2014-10-19T00:00:00+02:00">October 19, 2014</time> and last modified on <time datetime="2014-10-19">October 19, 2014</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="https://yakcyll.github.io/ygc-dev/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="https://yakcyll.github.io/ygc-dev/managed-code-and-you.html" title="Managed Code And You!">Managed Code And You!</a></li>
    
      <li><a href="https://yakcyll.github.io/ygc-dev/beginning.html" title="Beginning">Beginning</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

<span>&copy; 2014 yakcyll~. Using <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://yakcyll.github.io/ygc-dev/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://yakcyll.github.io/ygc-dev/assets/js/scripts.min.js"></script>

	        

</body>
</html>