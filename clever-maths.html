<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>The history of clever maths &#8211; ygc development blog</title>
<meta name="description" content="
  
    Overview
  


  


">
<meta name="keywords" content="ygc, development">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="The history of clever maths">
<meta name="twitter:description" content="
  
    Overview
  


  


">
<meta name="twitter:site" content="@yakcyll">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://yakcyll.github.io/ygc-dev/images/header.png">

<!-- Open Graph -->
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="The history of clever maths">
<meta property="og:description" content="
  
    Overview
  


  


">
<meta property="og:url" content="https://yakcyll.github.io/ygc-dev/clever-maths.html">
<meta property="og:site_name" content="ygc development blog">





<link rel="canonical" href="https://yakcyll.github.io/ygc-dev/clever-maths.html">
<link href="https://yakcyll.github.io/ygc-dev/feed.xml" type="application/atom+xml" rel="alternate" title="ygc development blog Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://yakcyll.github.io/ygc-dev/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="https://yakcyll.github.io/ygc-dev/assets/js/vendor/html5shiv.min.js"></script>
	<script src="https://yakcyll.github.io/ygc-dev/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="https://yakcyll.github.io/ygc-dev/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://yakcyll.github.io/ygc-dev/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://yakcyll.github.io/ygc-dev/favicon.png">

<!-- use https god damn it! -->
<script type="text/javascript">
  if (window.location.protocol != "https:" && window.location.href.indexOf("http://localhost") !== 0)
    window.location.href = "https:" + window.location.href.substring(window.location.protocol.length);
</script>

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="https://yakcyll.github.io/ygc-dev">ygc development blog</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
					    
					        
					    
					    <li><a href="https://yakcyll.github.io/ygc-dev/" >Main Page</a></li>
					  
					    
					        
					    
					    <li><a href="https://yakcyll.github.io/ygc-dev/posts/" >Posts</a></li>
					  
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


  <div class="image-wrap">
  <img src=
    
      "https://yakcyll.github.io/ygc-dev/images/header.png"
    
  alt="The history of clever maths feature image">
  
  </div><!-- /.image-wrap -->


<div id="main" role="main">
  <div class="article-author-side">
    

<!--
	<img src="https://yakcyll.github.io/ygc-dev/images/" class="bio-photo" alt="yakcyll~ bio photo">
    -->
<h3>yakcyll~</h3>
<p></p>
<a href="mailto:yakcyll@gmail.com" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/yakcyll" class="author-social" target="_blank"><i class="fa fa-twitter-square"></i> Twitter</a>





<a href="http://github.com/yakcyll" class="author-social" target="_blank"><i class="fa fa-github"></i> Github</a>







  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="https://yakcyll.github.io/ygc-dev/clever-maths.html" rel="bookmark" title="The history of clever maths">The history of clever maths</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <section id="table-of-contents" class="toc">
  <header>
    <h3>Overview</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#memory-handling-and-access-modifiers">Memory handling and access modifiers</a></li>
  <li><a href="#scrollviewer-quirks">Scrollviewer quirks</a></li>
  <li><a href="#assets">Assets</a></li>
</ul>

  </div>
</section>

<p>I haven’t written anything here for the last couple days, because I wanted to get something tangible to mumble about first. Turns out, if you don’t have both a good interface design nor a good knowledge of the existing APIs you’ll be working with, it might take some unnecessarily long time to get there. Nevertheless, here I am, with working board editor, some basic functionality to it and some not-so-slick UI to accompany it all. </p>

<p>Unfortunately, along the way I realized that making the whole thing resolution- and orientation-agnostic will be a damn tough challenge, so I can’t tell if it’ll be easily portable to other systems on the whim. There’s not much logic in there that isn’t bound to the UI (yet), so my class design slowly began to contain various UI handlers that help handling various operations, such as lambda binding, resource look-up and probably others. What is way worse is that I wanted the engine to be an actual engine in terms of game design - completely separated from the gameplay - but, while that’s going OK for me, implementing the UI that way might be proven more problematic than it’s worth (and I don’t even talk about wasting time on further refactoring of poorly implemented solutions, we have to write some actually maintainable code first).</p>

<p>I’ve begun to record to-do’s in the Issues tab on Github. If you want to contribute, feel free to pick one and put a comment up saying you’ll take care of it. Try to avoid small ones and bug fixes, as that list will under constant, fairly chaotic modification as I go through all of these.</p>

<h2 id="memory-handling-and-access-modifiers">Memory handling and access modifiers</h2>

<p>C++/CX takes a page from its spiritual predecessor, C# (or C++/CLI rather, but they both try to incorporate mechanisms we know from managed languages into native C++), and incorporates memory management into language syntax. Thanks to that, we now get two additional class type specifiers - ref, for reference counting, and value, for plain old data. Both have their own limitations (such as ref class being able to only have one other ref class as a base, or value class not being able to contain methods), but in general, ref classes work like shared pointers from C++11 standard library and value classes could be considered method-less structs. One bit to note here is that ref classes cannot have any native-typed pointers, in any shape or form, specified as public. Reason is, ref classes usually have their metadata exposed to WinRT and, if necessary, to the UI. I guess in order to avoid UI memory leaks/corruption, the compiler enforces usage of reference counting pointers in there. There are some other weird restrictions to it as well, but I haven’t investigated them much (if you really want a field to be public, try defining it with a property specifier).</p>

<p>If, for some reason, the public specifier does not allow you to do whatever you want and you don’t know a good way to redesign your approach, just use the new internal access modifier. It works like public (you can see the fields and methods from other classes), but isn’t public in terms of WinRT. As long as you don’t write any UI extensions or anything exposed to the managed part of code, you’re golden.</p>

<h2 id="scrollviewer-quirks">Scrollviewer quirks</h2>

<p>For those who haven’t worked with this control before, it works like this: it provides you with a viewport, through which you can look at whatever content it is bound to. You can use it to zoom and pan into said content, so it’s generally used when you have a long list of data you’d want to easily scroll through. To this end, it does its job very well. However, if you haven’t worked with anything like it before, it can get on your nerves very easily. Here’s a couple of tips:</p>

<ul>
  <li>
    <p>If you want the content to be scrollable on both axes, you have to define the HorizontalScrollBarVisibility as Hidden. It defaults to Disabled, which will cause your content to snap to the side on any attempt to pan it to a side. How does that make any sense from the conceptual point of view, I have no idea.</p>
  </li>
  <li>
    <p>ScrollableWidth and ScrollableHeight don’t necessarily mean what you think they do - they store a size (in pixels, after zoom) of the area of content that you can’t currently see but can scroll to. Basically, ScrollableWidth = ExtentWidth - ViewportWidth. That means that you can’t use them when your ScrollViewer isn’t rendered yet - it will just give you a zero.</p>
  </li>
  <li>
    <p>If you want to have it centered when you change the orientation, define a SizeChanged event handler where you will change the view to half the ScrollableWidth/Height. If you want it to stay where you were looking before the change, use Horizontal/VerticalOffset (those store the distance, supposedly in pixels after zoom, of the scrollbar from the beginning of its axis). If you rotate the control along the way, make sure to change the Height and Width of it, as well as apply necessary fixes to viewport parameters.</p>
  </li>
</ul>

<p>Also, in the commits prior to e736eb2 (13th, from 30th of October), you may notice some clever maths being tried to summon from an unearthy realm of speculative reasoning where the code for handling orientation was. It’s gone now. If you think real hard, you’ll quickly come up with the actual reason for that. The moral of the story is, first think if you really need the spiritual assistance before you attempt to do something that will end up with you pulling your hair out.</p>

<h2 id="assets">Assets</h2>

<p>There’s loads of errornous (preasumbly outdated) sites that state that, in order to load a content asset included in your solution, you gotta use the “ms-appx://Assets” syntax. Should that not work for you, try adding another slash in there, for good measure.</p>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          

<!--
	<img src="https://yakcyll.github.io/ygc-dev/images/" class="bio-photo" alt="yakcyll~ bio photo">
    -->
<h3>yakcyll~</h3>
<p></p>
<a href="mailto:yakcyll@gmail.com" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/yakcyll" class="author-social" target="_blank"><i class="fa fa-twitter-square"></i> Twitter</a>





<a href="http://github.com/yakcyll" class="author-social" target="_blank"><i class="fa fa-github"></i> Github</a>







        </div>
        <p class="byline"><strong>The history of clever maths</strong> was published on <time datetime="2014-10-30T00:00:00+01:00">October 30, 2014</time> and last modified on <time datetime="2014-10-30">October 30, 2014</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="https://yakcyll.github.io/ygc-dev/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="https://yakcyll.github.io/ygc-dev/handling-async-in-ccx.html" title="Handling async in C++/CX">Handling async in C++/CX</a></li>
    
      <li><a href="https://yakcyll.github.io/ygc-dev/managed-code-and-you.html" title="Managed Code And You!">Managed Code And You!</a></li>
    
      <li><a href="https://yakcyll.github.io/ygc-dev/beginning.html" title="Beginning">Beginning</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

<span>&copy; 2014 yakcyll~. Using <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://yakcyll.github.io/ygc-dev/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://yakcyll.github.io/ygc-dev/assets/js/scripts.min.js"></script>

	        

</body>
</html>